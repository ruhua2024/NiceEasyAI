<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>我的邀约 - 防鸽金</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "PingFang SC", "Source Han Sans SC", "Microsoft YaHei", sans-serif;
      -webkit-overflow-scrolling: touch;
      overflow-x: hidden;
    }
    
    /* 隐藏滚动条 */
    ::-webkit-scrollbar {
      display: none;
    }
    
    body {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
    
    .main-content {
      padding-top: 100px; /* 状态栏44px + 返回按钮/页面标题56px */
      padding-bottom: 80px;
      min-height: 100vh;
      background: linear-gradient(135deg, #E9C46A 0%, #F4A261 100%);
    }
  </style>
</head>
<body>
  <!-- 状态栏容器 -->
  <div id="status-bar-container"></div>
  
  <!-- 返回按钮容器 -->
  <div id="back-button-container"></div>
  
  <!-- 页面标题容器 -->
  <div id="page-title-container"></div>
  
  <!-- 主要内容区域 -->
  <div class="main-content">
    <!-- 筛选选项卡 -->
    <div class="px-4 mb-6">
      <div class="bg-white rounded-2xl p-4 shadow-lg">
        <div class="flex space-x-2">
          <button class="tab-btn active flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all duration-200"
                  style="background: #264653; color: white;" data-tab="all">
            全部
          </button>
          <button class="tab-btn flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all duration-200"
                  style="background: rgba(38, 70, 83, 0.1); color: #264653;" data-tab="ongoing">
            进行中
          </button>
          <button class="tab-btn flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all duration-200"
                  style="background: rgba(38, 70, 83, 0.1); color: #264653;" data-tab="completed">
            已完成
          </button>
          <button class="tab-btn flex-1 py-2 px-4 rounded-xl text-sm font-medium transition-all duration-200"
                  style="background: rgba(38, 70, 83, 0.1); color: #264653;" data-tab="cancelled">
            已取消
          </button>
        </div>
      </div>
    </div>

    <!-- 邀约列表 -->
    <div class="px-4 space-y-4">
      <!-- 进行中的邀约 -->
      <div class="invitation-card bg-white rounded-2xl p-4 shadow-lg" data-status="ongoing">
        <div class="flex items-start justify-between mb-3">
          <div class="flex items-center space-x-3">
            <img src="https://picsum.photos/50/50?random=1" alt="活动图片" class="w-12 h-12 rounded-xl object-cover">
            <div>
              <h3 class="font-semibold text-lg" style="color: #264653;">周末聚餐</h3>
              <p class="text-sm" style="color: #2A9D8F;">明天 18:00</p>
            </div>
          </div>
          <span class="px-3 py-1 rounded-full text-xs font-medium" style="background: rgba(42, 157, 143, 0.2); color: #2A9D8F;">
            进行中
          </span>
        </div>
        
        <div class="flex items-center justify-between text-sm mb-3">
          <span style="color: #666;">海底捞火锅 (万达店)</span>
          <span style="color: #666;">4/6人参与</span>
        </div>
        
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="text-center">
              <p class="text-xs" style="color: #666;">押金金额</p>
              <p class="font-bold" style="color: #E76F51;">¥20</p>
            </div>
            <div class="text-center">
              <p class="text-xs" style="color: #666;">我的押金</p>
              <p class="font-bold" style="color: #2A9D8F;">¥80</p>
            </div>
          </div>
          <button class="px-4 py-2 rounded-xl text-sm font-medium" style="background: #2A9D8F; color: white;">
            查看详情
          </button>
        </div>
      </div>

      <!-- 已完成的邀约 -->
      <div class="invitation-card bg-white rounded-2xl p-4 shadow-lg" data-status="completed">
        <div class="flex items-start justify-between mb-3">
          <div class="flex items-center space-x-3">
            <img src="https://picsum.photos/50/50?random=2" alt="活动图片" class="w-12 h-12 rounded-xl object-cover">
            <div>
              <h3 class="font-semibold text-lg" style="color: #264653;">电影之夜</h3>
              <p class="text-sm" style="color: #666;">昨天 19:30</p>
            </div>
          </div>
          <span class="px-3 py-1 rounded-full text-xs font-medium" style="background: rgba(38, 70, 83, 0.2); color: #264653;">
            已完成
          </span>
        </div>
        
        <div class="flex items-center justify-between text-sm mb-3">
          <span style="color: #666;">万达影城 (CBD店)</span>
          <span style="color: #666;">5/5人参与</span>
        </div>
        
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="text-center">
              <p class="text-xs" style="color: #666;">押金金额</p>
              <p class="font-bold" style="color: #E76F51;">¥15</p>
            </div>
            <div class="text-center">
              <p class="text-xs" style="color: #666;">已退还</p>
              <p class="font-bold" style="color: #2A9D8F;">¥75</p>
            </div>
          </div>
          <button class="px-4 py-2 rounded-xl text-sm font-medium" style="background: rgba(38, 70, 83, 0.1); color: #264653;">
            查看详情
          </button>
        </div>
      </div>

      <!-- 已取消的邀约 -->
      <div class="invitation-card bg-white rounded-2xl p-4 shadow-lg" data-status="cancelled">
        <div class="flex items-start justify-between mb-3">
          <div class="flex items-center space-x-3">
            <img src="https://picsum.photos/50/50?random=3" alt="活动图片" class="w-12 h-12 rounded-xl object-cover">
            <div>
              <h3 class="font-semibold text-lg" style="color: #264653;">户外烧烤</h3>
              <p class="text-sm" style="color: #666;">上周六 15:00</p>
            </div>
          </div>
          <span class="px-3 py-1 rounded-full text-xs font-medium" style="background: rgba(231, 111, 81, 0.2); color: #E76F51;">
            已取消
          </span>
        </div>
        
        <div class="flex items-center justify-between text-sm mb-3">
          <span style="color: #666;">奥林匹克森林公园</span>
          <span style="color: #666;">2/8人参与</span>
        </div>
        
        <div class="flex items-center justify-between">
          <div class="flex items-center space-x-4">
            <div class="text-center">
              <p class="text-xs" style="color: #666;">押金金额</p>
              <p class="font-bold" style="color: #E76F51;">¥25</p>
            </div>
            <div class="text-center">
              <p class="text-xs" style="color: #666;">已退还</p>
              <p class="font-bold" style="color: #2A9D8F;">¥50</p>
            </div>
          </div>
          <button class="px-4 py-2 rounded-xl text-sm font-medium" style="background: rgba(38, 70, 83, 0.1); color: #264653;">
            查看详情
          </button>
        </div>
      </div>
    </div>

    <!-- 空状态提示 -->
    <div class="empty-state hidden px-4 py-12 text-center">
      <i class="fas fa-calendar-times text-6xl mb-4" style="color: rgba(38, 70, 83, 0.3);"></i>
      <p class="text-lg font-medium mb-2" style="color: #264653;">暂无相关邀约</p>
      <p class="text-sm" style="color: #666;">快去创建或参与新的邀约吧！</p>
    </div>
  </div>

  <script>
    // 加载组件
    async function loadComponent(url, targetId) {
      try {
        const response = await fetch(url);
        const html = await response.text();
        document.getElementById(targetId).innerHTML = html;
        
        // 如果是页面标题组件，立即设置标题
        if (targetId === 'page-title-container') {
          setTimeout(() => {
            const titleElement = document.getElementById('main-page-title');
            if (titleElement) {
              titleElement.textContent = '我的邀约';
              console.log('标题已设置为：我的邀约');
            }
            // 隐藏功能按钮
            const buttonsContainer = document.querySelector('.absolute.right-4');
            if (buttonsContainer) {
              buttonsContainer.style.display = 'none';
            }
          }, 50);
        }
      } catch (error) {
        console.error('加载组件失败:', error);
      }
    }
    
    // 页面加载完成后加载组件
    document.addEventListener('DOMContentLoaded', async function() {
      await loadComponent('../components/status-bar.html', 'status-bar-container');
      await loadComponent('../components/back-button.html', 'back-button-container');
      await loadComponent('../components/page-title.html', 'page-title-container');
      
      // 标签切换功能
      const tabBtns = document.querySelectorAll('.tab-btn');
      const invitationCards = document.querySelectorAll('.invitation-card');
      const emptyState = document.querySelector('.empty-state');
      
      tabBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const targetTab = this.dataset.tab;
          
          // 更新标签样式
          tabBtns.forEach(tab => {
            tab.classList.remove('active');
            tab.style.background = 'rgba(38, 70, 83, 0.1)';
            tab.style.color = '#264653';
          });
          
          this.classList.add('active');
          this.style.background = '#264653';
          this.style.color = 'white';
          
          // 筛选邀约卡片
          let visibleCount = 0;
          invitationCards.forEach(card => {
            const cardStatus = card.dataset.status;
            if (targetTab === 'all' || cardStatus === targetTab) {
              card.style.display = 'block';
              visibleCount++;
            } else {
              card.style.display = 'none';
            }
          });
          
          // 显示/隐藏空状态
          if (visibleCount === 0) {
            emptyState.classList.remove('hidden');
          } else {
            emptyState.classList.add('hidden');
          }
        });
      });
      
      // 查看详情按钮点击事件
      const detailBtns = document.querySelectorAll('button:contains("查看详情")');
      detailBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          console.log('查看邀约详情');
          // 这里可以跳转到邀约详情页面
        });
      });
    });
  </script>
</body>
</html>
