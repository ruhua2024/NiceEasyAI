<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜²é¸½é‡‘ - HTMLåŸå‹è®¾è®¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #264653;
            --secondary-color: #2A9D8F;
            --accent-color: #E9C46A;
            --neutral-light: #F4A261;
            --neutral-dark: #E76F51;
            --base-height: 812px;
        }
        
        body {
            background-color: #EDEDED;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "PingFang SC", sans-serif;
        }
        
        .grid-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(375px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }
        
        .mobile-viewport {
            width: 375px;
            height: var(--base-height);
            background: white;
            border-radius: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15), 0 10px 20px rgba(0,0,0,0.1);
            overflow: hidden;
            position: relative;
            margin: 0 auto;
            transition: all 0.3s ease;
        }
        
        .mobile-viewport iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 40px;
            overflow: hidden;
        }

        /* æ­£å¸¸æ¨¡å¼ä¸‹å¼ºåˆ¶éšè—æ»šåŠ¨æ¡ */
        body:not(.expanded) .mobile-viewport iframe {
            overflow: hidden !important;
        }
        
        .page-label {
            position: absolute;
            bottom: -40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            color: #264653;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .expanded .mobile-viewport.expandable {
            height: auto;
            min-height: var(--base-height);
            transition: all 0.3s ease;
        }

        .expanded .mobile-viewport.expandable iframe {
            height: auto;
            min-height: var(--base-height);
        }
        
        .mode-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .mode-btn {
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid #000;
        }
        
        .mode-btn.active {
            background: #000;
            color: white;
            border-color: transparent;
        }
        
        .mode-btn:not(.active) {
            background: transparent;
            color: #000;
        }
        
        @media (max-width: 768px) {
            .grid-container {
                padding: 1rem;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8">
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-black mb-4">é˜²é¸½é‡‘</h1>
            <p class="text-xl text-black mb-6">æœ‹å‹é—´é‚€çº¦å‡ºè¡Œã€èšä¼šæ—¶ï¼Œé€šè¿‡å°é¢æŠ¼é‡‘çº¦æŸå‡å°‘çˆ½çº¦è¡Œä¸ºçš„ç¤¾äº¤å·¥å…·å°ç¨‹åº</p>
            
            <!-- æ¨¡å¼åˆ‡æ¢æŒ‰é’® -->
            <div class="mode-buttons justify-center">
                <button class="mode-btn active" id="normalModeBtn">æ­£å¸¸æ¨¡å¼</button>
                <button class="mode-btn" id="expandedModeBtn">å±•å¼€æ¨¡å¼</button>
            </div>
        </div>
        
        <!-- æ‰‹æœºç•Œé¢å±•ç¤ºåŒºåŸŸ -->
        <div class="grid-container" id="phoneGrid">
            <!-- é¡µé¢å°†é€šè¿‡JavaScriptåŠ¨æ€æ·»åŠ  -->
        </div>
    </div>

    <script>
        const BASE_HEIGHT = 812;
        let isExpanded = false;
        
        // æ¨¡å¼åˆ‡æ¢åŠŸèƒ½
        const normalModeBtn = document.getElementById('normalModeBtn');
        const expandedModeBtn = document.getElementById('expandedModeBtn');
        const body = document.body;
        
        normalModeBtn.addEventListener('click', () => {
            isExpanded = false;
            body.classList.remove('expanded');
            normalModeBtn.classList.add('active');
            expandedModeBtn.classList.remove('active');
            console.log('ğŸ”„ åˆ‡æ¢åˆ°æ­£å¸¸æ¨¡å¼ - æ‰€æœ‰é¡µé¢é«˜åº¦é‡ç½®ä¸º812px');

            // é‡ç½®æ‰€æœ‰é¡µé¢é«˜åº¦
            const allViewports = document.querySelectorAll('.mobile-viewport');
            allViewports.forEach(viewport => {
                const iframe = viewport.querySelector('iframe');
                viewport.style.height = BASE_HEIGHT + 'px';
                iframe.style.height = '100%';
                // åœ¨æ­£å¸¸æ¨¡å¼ä¸‹å¼ºåˆ¶éšè—æ»šåŠ¨æ¡
                try {
                    iframe.contentDocument.body.style.overflow = 'hidden';
                    iframe.contentDocument.documentElement.style.overflow = 'hidden';
                } catch (e) {
                    // è·¨åŸŸé™åˆ¶ï¼Œå¿½ç•¥
                    console.log('âš ï¸ æ— æ³•è®¾ç½®iframeæ»šåŠ¨æ¡æ ·å¼ï¼ˆè·¨åŸŸé™åˆ¶ï¼‰');
                }
            });
        });

        expandedModeBtn.addEventListener('click', () => {
            isExpanded = true;
            body.classList.add('expanded');
            expandedModeBtn.classList.add('active');
            normalModeBtn.classList.remove('active');
            console.log('ğŸ”„ åˆ‡æ¢åˆ°å±•å¼€æ¨¡å¼ - å¯å±•å¼€é¡µé¢å°†æ˜¾ç¤ºå®Œæ•´å†…å®¹');

            // æ˜¾ç¤ºå½“å‰å¯å±•å¼€é¡µé¢ç»Ÿè®¡
            const expandablePages = document.querySelectorAll('.mobile-viewport.expandable');
            console.log(`ğŸ“Š å½“å‰å…±æœ‰ ${expandablePages.length} ä¸ªå¯å±•å¼€é¡µé¢`);

            // è°ƒè¯•ï¼šæ£€æŸ¥æ¯ä¸ªå¯å±•å¼€é¡µé¢çš„çŠ¶æ€å¹¶åŠ¨æ€è°ƒæ•´é«˜åº¦
            expandablePages.forEach((viewport, index) => {
                const pageName = viewport.querySelector('.page-label').textContent;
                const iframe = viewport.querySelector('iframe');

                try {
                    const contentHeight = iframe.contentDocument.body.scrollHeight;
                    // è®¾ç½®viewporté«˜åº¦ä¸ºå†…å®¹é«˜åº¦
                    viewport.style.height = contentHeight + 'px';
                    // è®¾ç½®iframeé«˜åº¦ä¸º100%ä»¥å¡«å……viewport
                    iframe.style.height = '100%';
                    // ç¡®ä¿iframeå†…å®¹ä¸ä¼šäº§ç”Ÿæ»šåŠ¨æ¡
                    iframe.contentDocument.body.style.overflow = 'hidden';
                    console.log(`ğŸ” ${pageName}: å±•å¼€é«˜åº¦è®¾ç½®ä¸º${contentHeight}pxï¼Œæ»šåŠ¨æ¡å·²éšè—`);
                } catch (e) {
                    console.log(`âš ï¸ ${pageName}: æ— æ³•è·å–å†…å®¹é«˜åº¦ï¼Œä¿æŒé»˜è®¤å±•å¼€`);
                }
            });
        });
        
        // åˆ›å»ºæ‰‹æœºç•Œé¢å®¹å™¨
        function createMobileViewport(pageName, pageFile) {
            const viewport = document.createElement('div');
            viewport.className = 'mobile-viewport';
            viewport.innerHTML = `
                <iframe src="pages/${pageFile}" title="${pageName}"></iframe>
                <div class="page-label">${pageName}</div>
            `;
            
            // ç›‘å¬iframeåŠ è½½å®Œæˆï¼Œæ£€æµ‹å†…å®¹é«˜åº¦
            const iframe = viewport.querySelector('iframe');
            iframe.addEventListener('load', () => {
                try {
                    const contentHeight = iframe.contentDocument.body.scrollHeight;
                    console.log(`ğŸ“ ${pageName} å†…å®¹é«˜åº¦: ${contentHeight}px (åŸºå‡†: ${BASE_HEIGHT}px)`);

                    if (contentHeight > BASE_HEIGHT) {
                        viewport.classList.add('expandable');
                        console.log(`âœ… ${pageName} æ ‡è®°ä¸ºå¯å±•å¼€é¡µé¢ (è¶…å‡º${contentHeight - BASE_HEIGHT}px)`);
                    } else {
                        console.log(`ğŸ“± ${pageName} ä¿æŒæ­£å¸¸é«˜åº¦ (æœªè¶…å‡ºåŸºå‡†)`);
                    }

                    // å¦‚æœå½“å‰æ˜¯æ­£å¸¸æ¨¡å¼ï¼Œä¸»åŠ¨éšè—æ»šåŠ¨æ¡
                    if (!isExpanded) {
                        iframe.contentDocument.body.style.overflow = 'hidden';
                        iframe.contentDocument.documentElement.style.overflow = 'hidden';
                        console.log(`ğŸ”’ ${pageName} æ­£å¸¸æ¨¡å¼ä¸‹æ»šåŠ¨æ¡å·²éšè—`);
                    }
                } catch (e) {
                    // è·¨åŸŸé™åˆ¶ï¼Œä½¿ç”¨é¢„è®¾å€¼
                    console.log(`âš ï¸ ${pageName} æ— æ³•è·å–å†…å®¹é«˜åº¦ï¼Œä½¿ç”¨é¢„è®¾åˆ¤æ–­ (è·¨åŸŸé™åˆ¶)`);
                    // æ ¹æ®é¡µé¢ç±»å‹é¢„è®¾å¯å±•å¼€é¡µé¢
                    if (['åˆ›å»ºé‚€çº¦', 'ä¸ªäººä¿¡æ¯ä¸è®¾ç½®', 'å†å²è®°å½•'].includes(pageName)) {
                        viewport.classList.add('expandable');
                        console.log(`âœ… ${pageName} é¢„è®¾ä¸ºå¯å±•å¼€é¡µé¢ (åŸºäºé¡µé¢ç±»å‹)`);
                    } else {
                        console.log(`ğŸ“± ${pageName} é¢„è®¾ä¸ºæ­£å¸¸é«˜åº¦é¡µé¢`);
                    }
                }
            });
            
            return viewport;
        }
        
        // æ·»åŠ é¡µé¢åˆ°ç½‘æ ¼
        function addPagesToGrid(pages) {
            const grid = document.getElementById('phoneGrid');
            pages.forEach(page => {
                const viewport = createMobileViewport(page.name, page.file);
                grid.appendChild(viewport);
            });
        }
        
        // é¡µé¢é…ç½®ï¼ˆå°†åˆ†æ‰¹æ·»åŠ ï¼‰
        const allPages = [];

        // ç¬¬ä¸€æ‰¹ï¼šä¸€çº§é¡µé¢
        const firstLevelPages = [
            { name: 'é‚€çº¦é¦–é¡µ', file: 'é‚€çº¦é¦–é¡µ.html' },
            { name: 'æŠ¼é‡‘ç®¡ç†', file: 'æŠ¼é‡‘ç®¡ç†.html' },
            { name: 'ä¸ªäººä¸­å¿ƒ', file: 'ä¸ªäººä¸­å¿ƒ.html' }
        ];

        // ç¬¬äºŒæ‰¹ï¼šéä¸€çº§é¡µé¢ï¼ˆç¬¬ä¸€æ‰¹ï¼‰
        const secondBatchPages = [
            { name: 'åˆ›å»ºé‚€çº¦', file: 'åˆ›å»ºé‚€çº¦.html' },
            { name: 'é‚€çº¦è¯¦æƒ…', file: 'é‚€çº¦è¯¦æƒ….html' }
        ];

        // ç¬¬ä¸‰æ‰¹ï¼šéä¸€çº§é¡µé¢ï¼ˆç¬¬äºŒæ‰¹ï¼‰
        const thirdBatchPages = [
            { name: 'ä¸ªäººä¿¡æ¯ä¸è®¾ç½®', file: 'ä¸ªäººä¿¡æ¯ä¸è®¾ç½®.html' },
            { name: 'å†å²è®°å½•', file: 'å†å²è®°å½•.html' }
        ];

        // é¡µé¢åŠ è½½å®Œæˆåæ·»åŠ ç¬¬ä¸€æ‰¹é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ é˜²é¸½é‡‘HTMLåŸå‹å¼€å§‹åŠ è½½...');
            console.log(`ğŸ“Š é¡¹ç›®é…ç½®: æ€»è®¡${firstLevelPages.length + secondBatchPages.length + thirdBatchPages.length}ä¸ªé¡µé¢`);
            console.log(`ğŸ“± åŸºå‡†é«˜åº¦è®¾ç½®: ${BASE_HEIGHT}px`);

            addPagesToGrid(firstLevelPages);
            console.log(`âœ… ç¬¬ä¸€æ‰¹é¡µé¢ï¼ˆä¸€çº§é¡µé¢ï¼‰å·²åŠ è½½å®Œæˆ - ${firstLevelPages.length}ä¸ªé¡µé¢`);

            // å»¶è¿Ÿæ·»åŠ ç¬¬äºŒæ‰¹é¡µé¢
            setTimeout(() => {
                addPagesToGrid(secondBatchPages);
                console.log(`âœ… ç¬¬äºŒæ‰¹é¡µé¢å·²åŠ è½½å®Œæˆ - ${secondBatchPages.length}ä¸ªé¡µé¢`);
            }, 1000);

            // å»¶è¿Ÿæ·»åŠ ç¬¬ä¸‰æ‰¹é¡µé¢
            setTimeout(() => {
                addPagesToGrid(thirdBatchPages);
                console.log(`âœ… ç¬¬ä¸‰æ‰¹é¡µé¢å·²åŠ è½½å®Œæˆ - ${thirdBatchPages.length}ä¸ªé¡µé¢`);
                console.log('ğŸ‰ æ‰€æœ‰é¡µé¢åˆ›å»ºå®Œæˆï¼Œè¯·æŸ¥çœ‹å®Œæ•´çš„index.htmlé¢„è§ˆ');
                console.log('ğŸ’¡ æç¤º: ä½¿ç”¨å±•å¼€æ¨¡å¼æŸ¥çœ‹å†…å®¹è¾ƒå¤šçš„é¡µé¢å®Œæ•´æ•ˆæœ');
            }, 2000);
        });

        // å¯¼å‡ºå‡½æ•°ä¾›åˆ†æ‰¹ä½¿ç”¨
        window.addPagesToGrid = addPagesToGrid;
        window.createMobileViewport = createMobileViewport;
    </script>
</body>
</html>